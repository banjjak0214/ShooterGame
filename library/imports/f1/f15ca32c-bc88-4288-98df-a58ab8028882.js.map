{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\game/assets\\script\\game\\cover.js"],"names":["cc","Class","extends","Component","properties","gameNode","Node","continueNode","cancelBtn","radialCounter","Sprite","start","on","closeCount","init","_started","active","fillRange","y","node","height","runAction","sequence","moveTo","delayTime","callFunc","startCount","scheduleOnce","scale","scaleTo","update","dt","_updateFillRange","stopAllActions","repeatForever","parent","getComponent","gameOver","stopCount","sprite"],"mappings":";;;;;;AAAA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAASL,GAAGM,IADJ;AAERC,sBAAaP,GAAGM,IAFR;AAGRE,mBAAUR,GAAGM,IAHL;AAIRG,uBAAcT,GAAGU;;AAJT,KAHP;;AAWLC,SAXK,mBAWI;;AAEL,aAAKH,SAAL,CAAeI,EAAf,CAAkB,YAAlB,EAAgC,YAAU;AACtC,iBAAKC,UAAL;AACH,SAFD,EAEG,IAFH;AAGH,KAhBI;AAiBLC,QAjBK,kBAiBC;AAAA;;AACF,aAAKC,QAAL,GAAgB,KAAhB;AACA,aAAKP,SAAL,CAAeQ,MAAf,GAAwB,KAAxB;AACA,aAAKP,aAAL,CAAmBQ,SAAnB,GAA+B,CAA/B;AACA,aAAKV,YAAL,CAAkBW,CAAlB,GAAsB,KAAKC,IAAL,CAAUC,MAAV,GAAiB,CAAjB,GAAqB,KAAKb,YAAL,CAAkBa,MAAlB,GAAyB,CAApE;AACA,aAAKb,YAAL,CAAkBc,SAAlB,CAA4BrB,GAAGsB,QAAH,CACxBtB,GAAGuB,MAAH,CAAU,IAAV,EAAgB,CAAhB,EAAmB,CAAnB,CADwB,EAExBvB,GAAGuB,MAAH,CAAU,IAAV,EAAgB,CAAhB,EAAmB,CAAC,GAApB,CAFwB,EAGxBvB,GAAGuB,MAAH,CAAU,IAAV,EAAgB,CAAhB,EAAmB,GAAnB,CAHwB,EAIxBvB,GAAGuB,MAAH,CAAU,IAAV,EAAgB,CAAhB,EAAmB,GAAnB,CAJwB,EAKxBvB,GAAGwB,SAAH,CAAa,GAAb,CALwB,EAMxBxB,GAAGyB,QAAH,CAAY,KAAKC,UAAjB,EAA6B,IAA7B,CANwB,CAA5B;;AASA,aAAKC,YAAL,CAAkB,YAAM;AACpB,kBAAKnB,SAAL,CAAeoB,KAAf,GAAuB,CAAvB;AACA,kBAAKpB,SAAL,CAAeQ,MAAf,GAAwB,IAAxB;AACA,kBAAKR,SAAL,CAAea,SAAf,CAAyBrB,GAAG6B,OAAH,CAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAnB,CAAzB;AACH,SAJD,EAIG,GAJH;AAKH,KApCI;AAqCLC,UArCK,kBAqCGC,EArCH,EAqCO;AACR,YAAG,KAAKhB,QAAR,EAAiB;AACb,iBAAKiB,gBAAL,CAAsB,KAAKvB,aAA3B,EAA0CsB,EAA1C;AACH;AACJ,KAzCI;AA0CLL,cA1CK,wBA0CO;AACR,aAAKX,QAAL,GAAgB,IAAhB;AACA,aAAKR,YAAL,CAAkB0B,cAAlB;AACA,aAAK1B,YAAL,CAAkBc,SAAlB,CAA4BrB,GAAGkC,aAAH,CACxBlC,GAAGsB,QAAH,CACItB,GAAG6B,OAAH,CAAW,GAAX,EAAgB,GAAhB,CADJ,EAEI7B,GAAG6B,OAAH,CAAW,GAAX,EAAgB,GAAhB,CAFJ,CADwB,CAA5B;AAMH,KAnDI;AAoDLhB,cApDK,wBAoDO;AACR,aAAKE,QAAL,GAAgB,KAAhB;AACA,aAAKI,IAAL,CAAUH,MAAV,GAAmB,KAAnB;AACA,aAAKG,IAAL,CAAUgB,MAAV,CAAiBC,YAAjB,CAA8B,MAA9B,EAAsCC,QAAtC;AACH,KAxDI;AAyDLC,aAzDK,uBAyDM;AACP,aAAKvB,QAAL,GAAgB,KAAhB;AACH,KA3DI;;AA4DLiB,sBAAkB,0BAAUO,MAAV,EAAkBR,EAAlB,EAAsB;AACpC,YAAId,YAAYsB,OAAOtB,SAAvB;AACA,YAAGA,aAAa,CAAhB,EAAkB;AACd,iBAAKJ,UAAL;AACH,SAFD,MAEK;AACD0B,mBAAOtB,SAAP,IAAqBc,KAAK,GAA1B;AACH;AACJ;AAnEI,CAAT","file":"cover.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\game","sourcesContent":["// const Global = require(\"Global\")\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        gameNode:cc.Node,\r\n        continueNode:cc.Node,\r\n        cancelBtn:cc.Node,\r\n        radialCounter:cc.Sprite\r\n\r\n    },\r\n\r\n    start () {\r\n        \r\n        this.cancelBtn.on('touchstart', function(){\r\n            this.closeCount();\r\n        }, this);\r\n    },\r\n    init(){\r\n        this._started = false;\r\n        this.cancelBtn.active = false;\r\n        this.radialCounter.fillRange = 1;\r\n        this.continueNode.y = this.node.height/2 + this.continueNode.height/2;\r\n        this.continueNode.runAction(cc.sequence(\r\n            cc.moveTo(0.12, 0, 0),\r\n            cc.moveTo(0.08, 0, -100),\r\n            cc.moveTo(0.24, 0, 200),\r\n            cc.moveTo(0.15, 0, 132),\r\n            cc.delayTime(0.1),\r\n            cc.callFunc(this.startCount, this)\r\n        ));\r\n        \r\n        this.scheduleOnce(() => {\r\n            this.cancelBtn.scale = 5;\r\n            this.cancelBtn.active = true;\r\n            this.cancelBtn.runAction(cc.scaleTo(0.2, 1, 1));\r\n        }, 0.6);\r\n    },\r\n    update (dt) {\r\n        if(this._started){\r\n            this._updateFillRange(this.radialCounter, dt);\r\n        }\r\n    },\r\n    startCount(){\r\n        this._started = true;\r\n        this.continueNode.stopAllActions();\r\n        this.continueNode.runAction(cc.repeatForever(\r\n            cc.sequence(\r\n                cc.scaleTo(0.7, 1.2),\r\n                cc.scaleTo(0.7, 0.9)\r\n            )\r\n        ));\r\n    },\r\n    closeCount(){\r\n        this._started = false;\r\n        this.node.active = false;\r\n        this.node.parent.getComponent('game').gameOver();\r\n    },\r\n    stopCount(){\r\n        this._started = false;\r\n    },\r\n    _updateFillRange: function (sprite, dt) {\r\n        var fillRange = sprite.fillRange;\r\n        if(fillRange <= 0){\r\n            this.closeCount();            \r\n        }else{\r\n            sprite.fillRange -= (dt * 0.2);\r\n        }\r\n    }\r\n});\r\n"]}