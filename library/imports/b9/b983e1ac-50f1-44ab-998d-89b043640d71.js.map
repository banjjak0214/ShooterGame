{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\game/assets\\script\\game\\game.js"],"names":["GameData","require","cc","Class","extends","Component","properties","continueNode","Node","player","scoreView","gameBox","continueBtn","blastPrefab","Prefab","failBlastPrefab","blockPrefab","endBlockPrefab","starBlockPrefab","blockListPrefab","specListPrefab","fastPrefab","powerPrefab","doublePrefab","rocketPrefab","onLoad","game","blockPool","NodePool","blastPool","makePools","director","getCollisionManager","enabled","soundStatus","isSound","console","log","i","block","instantiate","put","blast","getComponent","ParticleSystem","stopSystem","start","self","_delayTime","on","moveCursor","createBonus","scheduleOnce","createNextBlock","_isInvite","invite","init","jumpMove","centerLine","height","y","actorLine","endLine","collideStatus","bulletSpeed","bulletPower","bulletMulti","score","level","levelInCount","levelInNum","blockValInLevel","_gameOver","_bw","width","cursorXPos","removeAllChilds","isPaused","firstBlockGroup","createRandBlocks","type","parseInt","Math","random","newProp","range","_x","_y","setPosition","addChild","rocketStatus","runAction","sequence","moveTo","blockDropSpeed","x","callFunc","removeProp","stopRocketing","prop","stopAllActions","removeFromParent","createSpecGroup","createEndGroup","createBlockGroup","getBlockList","newList","parent","removeBlockList","blockList","blocks","children","index","name","size","get","active","label","minBlock","isMin","isStar","getBlock","ran","maxCount","specList","setVal","setMaxGroupCount","dT","delayTime","disableEvent","yCount","removeAllChildren","xPos","yPos","variance","changeScoreView","Label","string","convertNum","scaleTo","event","locationv","getLocation","location","convertToNodeSpaceAR","minX","maxX","deltaX","gameOver","loadScene","pauseGame","submitScore","pauseAllChilds","node","moveBy","failBlast","resumeAllChilds","childs","child","pauseAllActions","resumeAllActions","exploreAllBlocks","exploreALL","childrenCount","subChilds","length","subChild","explore","setRockect","group","stopCount","window","wx","undefined","shareAppMessage","title","imageUrl","query","success","res","continueGame","fail","startCount","num","round","revertNum","strNum","String","search","Number","substr","postMessage","messageType"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\game","sourcesContent":["// var CHD = require(\"commonHandler\");\r\nvar GameData = require(\"gameData\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        continueNode:cc.Node,\r\n        player:cc.Node,\r\n        scoreView:cc.Node,\r\n\r\n        gameBox:cc.Node,\r\n        continueBtn:cc.Node,\r\n\r\n        // bulletGroupPrefab:cc.Prefab,\r\n        blastPrefab:cc.Prefab,\r\n        failBlastPrefab:cc.Prefab,\r\n\r\n        blockPrefab:cc.Prefab,\r\n        endBlockPrefab:cc.Prefab,\r\n        starBlockPrefab:cc.Prefab,\r\n        blockListPrefab:cc.Prefab,\r\n        specListPrefab:cc.Prefab,\r\n\r\n        fastPrefab: cc.Prefab,\r\n        powerPrefab: cc.Prefab,\r\n        doublePrefab: cc.Prefab,\r\n        rocketPrefab: cc.Prefab\r\n    },\r\n\r\n    onLoad () {\r\n        // GameData.bulletGroupPool = new cc.NodePool();\r\n        GameData.game = this;\r\n        GameData.blockPool = new cc.NodePool();\r\n        GameData.blastPool = new cc.NodePool();\r\n        this.makePools();\r\n        cc.director.getCollisionManager().enabled = true;\r\n        \r\n        this.soundStatus = GameData.isSound;\r\n    },\r\n    makePools(){\r\n            console.log('make pool');\r\n            // for (let i = 0; i < 20; ++i) {\r\n            //     let bullet = cc.instantiate(this.bulletGroupPrefab);\r\n            //     GameData.bulletGroupPool.put(bullet);\r\n            // }\r\n        \r\n            for (let i = 0; i < 50; ++i) {\r\n                let block = cc.instantiate(this.blockPrefab);\r\n                GameData.blockPool.put(block);\r\n            }\r\n        \r\n            for (let i = 0; i < 10 ; ++i) {\r\n                let blast = cc.instantiate(this.blastPrefab);\r\n                blast.getComponent(cc.ParticleSystem).stopSystem();\r\n                GameData.blastPool.put(blast);\r\n            }\r\n    },\r\n    start () {\r\n        let self = this;\r\n        self._delayTime = 0;\r\n\r\n        this.gameBox.on('touchstart', this.moveCursor,  this);\r\n        this.gameBox.on('touchmove', this.moveCursor, this);\r\n\r\n        this.gameBox.on('passedCenterLine', function(){\r\n            self.createBonus();\r\n        }, this);\r\n        this.gameBox.on('passedActorLine', function(){\r\n            self.scheduleOnce(function(){\r\n                self.createNextBlock();\r\n                self._delayTime =  0;\r\n            },  self._delayTime);\r\n        }, this);\r\n\r\n        // this.gameBox.on('changedScore', function(){\r\n        //     self.changeScoreView();\r\n        // }, this);\r\n\r\n        // this.gameBox.on('exploreALL', function(){\r\n        //     if(this.exploreStatus) return;\r\n        //     this.exploreStatus = true;\r\n        //     self.exploreAllBlocks();\r\n        // }, this);\r\n\r\n        this.continueBtn.on('touchstart', function(){\r\n            if(self._isInvite) return;\r\n            self.invite();\r\n        });\r\n\r\n        // this.node.on('startRocket', function(){\r\n        //     self.setRockect();\r\n        // }, this);\r\n        this.init();\r\n    },\r\n    init() {\r\n        GameData.jumpMove = 0;\r\n        GameData.centerLine = (this.gameBox.height/2 + this.player.y)/2+300;\r\n        GameData.actorLine = this.player.y+this.player.height;\r\n        GameData.endLine = -this.gameBox.height/2;\r\n        GameData.collideStatus = [0,0];\r\n        GameData.bulletSpeed = 4;\r\n        GameData.bulletPower = 6;\r\n        GameData.bulletMulti = 1;\r\n        GameData.score = 0;\r\n        this._isInvite = false;\r\n        this.level = 1;\r\n        this.levelInCount = 9;\r\n        this.levelInNum = 0;\r\n        this.blockValInLevel = 10;\r\n        this._delayTime = 0;\r\n        this._gameOver = false;\r\n\r\n        this._bw = this.gameBox.width/5;\r\n\r\n        GameData.cursorXPos = 0;\r\n\r\n        this.removeAllChilds();\r\n\r\n        this.isPaused = false;\r\n        this.player.getComponent('player').init();\r\n        this.firstBlockGroup();\r\n    },\r\n    createBonus(){\r\n        if(this.isPaused) return;\r\n        this.createRandBlocks();\r\n        \r\n        let type = parseInt(12*Math.random());\r\n        if(type !== 4 || this.level < 2){\r\n            if(GameData.bulletMulti == 3){\r\n                type = parseInt(2 * Math.random()) + 1;\r\n            }else{\r\n                type = parseInt(3 * Math.random()) + 1;\r\n            }\r\n        }\r\n        let newProp = null;\r\n        switch (type) {\r\n            case 1:\r\n                newProp = cc.instantiate(this.fastPrefab);\r\n                break;\r\n            case 2:\r\n                newProp = cc.instantiate(this.powerPrefab);\r\n                break;\r\n            case 3:\r\n                newProp = cc.instantiate(this.doublePrefab);\r\n                break;\r\n            case 4:\r\n                newProp = cc.instantiate(this.rocketPrefab);\r\n                break;\r\n        }\r\n        let range = this.gameBox.width - newProp.width * 3/2;\r\n        let _x = parseInt((range) * Math.random()) - range/2,\r\n            _y = this.gameBox.height/2 + newProp.height;\r\n        newProp.setPosition(_x, _y);\r\n        this.gameBox.addChild(newProp);\r\n\r\n        if(GameData.rocketStatus === 1){\r\n            newProp.runAction(cc.sequence( \r\n                cc.moveTo(GameData.blockDropSpeed/5, newProp.x, this.gameBox.height/2-300),\r\n                cc.moveTo(0.01, this.player.x, this.player.y + 30)\r\n            ));\r\n        }else{\r\n            newProp.runAction(cc.sequence( cc.moveTo(GameData.blockDropSpeed, newProp.x, -this.gameBox.height/2-100), cc.callFunc(this.removeProp, newProp, true)));\r\n        }\r\n\r\n        if(GameData.rocketStatus === 2){\r\n            this.stopRocketing();\r\n            this._delayTime = 1;\r\n        }\r\n    },\r\n    removeProp(prop){\r\n        prop.stopAllActions();\r\n        prop.removeFromParent();\r\n    },\r\n    createNextBlock(){\r\n        if(this.isPaused) return;\r\n        this.levelInNum += 1;\r\n        if(this.levelInNum == this.levelInCount -1){\r\n            this.scheduleOnce(this.createSpecGroup, 0.5);\r\n            // this.createSpecGroup();\r\n        }else if(this.levelInCount == this.levelInNum){\r\n            this.levelInNum = 0;\r\n            this.blockValInLevel = 90*this.level*this.level + 10;\r\n            this.level += 1;\r\n            this.levelInCount = 7;\r\n            this.createEndGroup();\r\n        }else{\r\n            this.createBlockGroup();\r\n        }\r\n    },\r\n    getBlockList(){\r\n        let newList = cc.instantiate(this.blockListPrefab);\r\n        newList.setPosition(-this.gameBox.width/2, this.gameBox.height/2);\r\n        newList.parent = this.gameBox;\r\n        return newList;\r\n    },\r\n    removeBlockList(blockList){\r\n        let blocks = blockList.children;\r\n        for(let index in blocks){\r\n            let block = blocks[index];\r\n            if(block.name == 'block'){\r\n                GameData.blockPool.put(block);\r\n            }else{\r\n                block.removeFromParent();\r\n            }\r\n        }\r\n       \r\n        blockList.removeFromParent();\r\n    },\r\n    firstBlockGroup(){\r\n        let self = this;\r\n        let blockList = this.getBlockList();\r\n        for(var y = 0; y < 3; y++){\r\n            for(var x = 0; x < 5; x++){\r\n                let block = null;\r\n                if (GameData.blockPool.size() > 0) {\r\n                    block = GameData.blockPool.get();\r\n                } else {\r\n                    block = cc.instantiate(this.blockPrefab);\r\n                }\r\n                \r\n                block.parent = blockList;\r\n                block.active = true;\r\n\r\n                block.setPosition((x+0.5)*this._bw, y*150);\r\n\r\n                let label = parseInt(3 * Math.random()) + 1;\r\n                \r\n\r\n                if(label == 1){\r\n                    block.getComponent('block').init(label, 97, 193, 7);\r\n                }else{\r\n                    block.getComponent('block').init(label, 205, 27, 23);\r\n                }\r\n\r\n            }\r\n        }\r\n        blockList.height = 450;\r\n        blockList.runAction(cc.sequence( cc.moveTo(GameData.blockDropSpeed, blockList.x, -this.gameBox.height/2-450), cc.callFunc(self.removeBlockList, blockList, true)));\r\n    },\r\n    createBlockGroup(){\r\n        let self = this;\r\n        let blockList = this.getBlockList();\r\n        let minBlock = parseInt(5*Math.random());\r\n        \r\n        for(var x = 0; x < 5; x++){\r\n            let block = null;\r\n            let isMin = 0;\r\n            let isStar = 0;\r\n            if(x == minBlock){\r\n                isMin = 1;\r\n            }else if(this.level > 1){\r\n                isStar = parseInt(10*Math.random());\r\n            }\r\n\r\n            if(isStar === 1){\r\n                block = self.getBlock(x, 0, isMin, true);\r\n            }else{\r\n                block = self.getBlock(x, 0, isMin, false);\r\n            }\r\n            \r\n            block.parent = blockList;\r\n        }\r\n\r\n        var ran = parseInt(8*Math.random());\r\n        if(ran < 5){\r\n            let block = self.getBlock(ran, 1, 0, false);\r\n            block.parent = blockList;\r\n        }\r\n        \r\n        blockList.runAction(cc.sequence( cc.moveTo(GameData.blockDropSpeed, blockList.x, -this.gameBox.height/2-200), cc.callFunc(self.removeBlockList, blockList, true)));\r\n    },\r\n    createSpecGroup(){\r\n        let self = this;\r\n        let maxCount = parseInt(5*Math.random());\r\n        let specList = cc.instantiate(this.specListPrefab);\r\n        specList.setPosition(-this.gameBox.width/2, this.gameBox.height/2);\r\n        specList.parent = this.gameBox;\r\n        specList.height = 0;\r\n        specList.getComponent('specList').setVal(this.blockValInLevel);\r\n        if(maxCount === 1){\r\n            maxCount = 7;\r\n            specList.getComponent('specList').setMaxGroupCount(maxCount);\r\n        }else{\r\n            maxCount = 1;\r\n        }\r\n        \r\n        var dT = 0.45*GameData.blockDropSpeed*(this.gameBox.height + maxCount*3000)/this.gameBox.height;\r\n        specList.runAction(cc.sequence(\r\n            cc.delayTime((maxCount-1)/30),\r\n            cc.moveTo(dT, specList.x, -this.gameBox.height/2-maxCount*3000), \r\n            cc.callFunc(self.removeBlockList, specList, true)\r\n        ));\r\n    },\r\n    createRandBlocks(){\r\n        let self = this;\r\n        let blockList = null;\r\n\r\n        if(this.levelInNum == this.levelInCount -2){\r\n            blockList = this.getBlockList();\r\n            for(var x = 0; x < 5; x++){\r\n                let block = self.getBlock(x, 0, -1, false);\r\n                block.parent = blockList;\r\n                block.getComponent('block').init(1, 97, 193, 7);\r\n            }\r\n        }else if(this.levelInNum < this.levelInCount -2 && this.levelInNum != 0){\r\n            var ran = parseInt(4*Math.random());\r\n            if(ran == 1 && this.blockValInLevel > 80){\r\n                blockList = this.getBlockList();\r\n                ran = parseInt(5*Math.random());\r\n                let block = self.getBlock(ran, 0, -1, false);\r\n                \r\n                block.parent = blockList;\r\n                block.getComponent('block').init(this.blockValInLevel*20, 147, 41, 156);\r\n            }\r\n        }\r\n\r\n        if(blockList){\r\n            blockList.getComponent('blockList').disableEvent();\r\n            blockList.runAction(cc.sequence( cc.moveTo(0.9, blockList.x, -this.gameBox.height/2-150), cc.callFunc(self.removeBlockList, blockList, true)));\r\n        }\r\n    },\r\n    createEndGroup(){\r\n        let self = this;\r\n        let blockList = this.getBlockList();\r\n        let yCount = 1;\r\n        if(this.level % 4 === 0){\r\n            yCount = 4;\r\n        }\r\n        for(var y = 0; y < yCount; y++){\r\n            for(var x = 0; x < 5; x++){\r\n                let block = null;\r\n                block = cc.instantiate(this.endBlockPrefab);\r\n                \r\n                block.parent = blockList;\r\n                block.setPosition((x+0.5)*block.width, y*150);\r\n\r\n                let label = parseInt((this.blockValInLevel - parseInt(this.blockValInLevel* Math.random()/4))/yCount);\r\n                block.getComponent('endBlock').init(label);\r\n            }\r\n        }\r\n        blockList.height = yCount*150;\r\n        blockList.runAction(cc.sequence( \r\n            cc.moveTo(GameData.blockDropSpeed, blockList.x, -this.gameBox.height/2-blockList.height), \r\n            cc.callFunc(function(){\r\n                blockList.removeAllChildren();\r\n                blockList.removeFromParent();\r\n            }, this)\r\n        ));\r\n    },\r\n    getBlock(xPos, yPos, isMin, isStar){\r\n        let block = null;\r\n        if(isStar){\r\n            block = cc.instantiate(this.starBlockPrefab);\r\n        }else{\r\n            if (GameData.blockPool.size() > 0) {\r\n                block = GameData.blockPool.get();\r\n            } else {\r\n                block = cc.instantiate(this.blockPrefab);\r\n            }\r\n        }\r\n        block.setPosition((xPos+0.5)*this._bw, yPos*150);\r\n        block.active = true;\r\n\r\n        let variance = parseInt(this.blockValInLevel/4);\r\n        if(isMin === 1){\r\n            let label = (3 + this.levelInNum)*variance;\r\n            block.getComponent('block').init(label, 97, 193, 7);\r\n        }else if(isMin === 0){\r\n            let label = this.blockValInLevel - parseInt(variance* Math.random()) + this.levelInNum*variance;\r\n            block.getComponent('block').init(label, 205, 25, 25);\r\n        }\r\n\r\n        return block;\r\n    },\r\n    changeScoreView(){\r\n        this.scoreView.getComponent(cc.Label).string = this.convertNum(GameData.score);\r\n        this.scoreView.runAction(\r\n            cc.sequence(\r\n                cc.scaleTo(0.03, 1.15),\r\n                cc.scaleTo(0.03, 1)\r\n            )\r\n        );\r\n    },\r\n    moveCursor(event) {\r\n        let locationv = event.getLocation();\r\n        let location = this.gameBox.convertToNodeSpaceAR(locationv);\r\n\r\n        let minX = -this.gameBox.width / 2 + this.player.width / 2,\r\n            maxX = -minX\r\n        if (location.x < minX) location.x = minX;\r\n        if (location.x > maxX) location.x = maxX;\r\n        let xPos = location.x;\r\n        GameData.cursorXPos = xPos;\r\n\r\n        if(this.isPaused || GameData.jumpMove) return;\r\n        // if(CHD.jumpMove) {\r\n        //     CHD.jumpMove = 0\r\n        //     return;\r\n        // }\r\n        var deltaX = xPos - this.player.x;\r\n        if(GameData.collideStatus[0] > 0 && deltaX*GameData.collideStatus[1] < 0) return;\r\n\r\n        this.player.x = xPos;\r\n    },\r\n    gameOver() {\r\n        if(this._gameOver) return;\r\n        this.removeAllChilds();\r\n        cc.director.loadScene('gameOver');\r\n        this._gameOver = true;\r\n    },\r\n    pauseGame(){\r\n        this.submitScore();\r\n        this.pauseAllChilds();\r\n        this.node.runAction(cc.sequence(\r\n            cc.moveBy(0.015, 5, 50),\r\n            cc.moveBy(0.015, -5, -50),\r\n            cc.moveBy(0.01, -5, 30),\r\n            cc.moveBy(0.01, 5, -30)\r\n        ));\r\n        let failBlast = cc.instantiate(this.failBlastPrefab);\r\n        failBlast.setPosition(this.player.x, this.player.y);\r\n        failBlast.parent = this.gameBox.parent;\r\n        this.scheduleOnce(() => {\r\n            failBlast.removeFromParent();\r\n            \r\n            if(GameData.score < 500 || this._isInvite){\r\n                this.gameOver();\r\n            }else{\r\n                this.player.active = false;\r\n                this.resumeAllChilds();\r\n    \r\n                this.continueNode.active = true;\r\n                this.continueNode.getComponent('cover').init();\r\n            }\r\n        }, 0.8);\r\n        \r\n    },\r\n    \r\n    removeAllChilds(){\r\n        this.isPaused = true;\r\n        let childs = this.gameBox.children;\r\n\r\n        for(let x in childs){\r\n            let child = childs[x];\r\n            if(child.name == 'blockList' || child.name == 'specList'){\r\n                child.stopAllActions();\r\n                this.removeBlockList(child);\r\n            }else if(child.name == 'forceful'){\r\n                GameData.bulletPower += 2;\r\n                child.removeFromParent();\r\n            }else if(child.name == 'fast'){\r\n                GameData.bulletSpeed += 2;\r\n                child.removeFromParent();\r\n            }else if(child.name == 'double' || child.name == 'rocket'){\r\n                child.removeFromParent();\r\n            }\r\n            // else if(child.name == 'bulletGroup'){\r\n            //     child.stopAllActions();\r\n            //     GameData.bulletGroupPool.put(child);\r\n            // }\r\n        }\r\n\r\n        this.gameBox.removeAllChildren();\r\n    },\r\n    pauseAllChilds(){\r\n        this.isPaused = true;\r\n        let childs = this.gameBox.children;\r\n        for(let index in childs){\r\n            childs[index].pauseAllActions();\r\n        }\r\n    },\r\n    resumeAllChilds(){\r\n        this.isPaused = false;\r\n        let childs = this.gameBox.children;\r\n        for(let index in childs){\r\n            childs[index].resumeAllActions();\r\n        }\r\n    },\r\n    exploreAllBlocks(){\r\n        if(GameData.exploreALL) return;\r\n        GameData.exploreALL = true;\r\n        let childs = this.gameBox.children;\r\n        console.log('Total count  '+ this.gameBox.childrenCount);        \r\n        for(let x in childs){\r\n            let child = childs[x];\r\n            if(child.name == 'blockList' || child.name == 'specList'){\r\n                let subChilds = child.children;\r\n                console.log('list count  '+ subChilds.length);\r\n                for(let y in subChilds){\r\n                    let subChild = subChilds[y];\r\n                    console.log('block name   ' + subChild.name);\r\n                    if(subChild.name == 'endBlock'){\r\n                        subChild.getComponent('endBlock').explore();\r\n                    }else if(subChild.name == 'block' || subChild.name == 'starBlock'){\r\n                        subChild.getComponent('block').explore();\r\n                    }\r\n                }\r\n            }else if(child.name == 'forceful'){\r\n                GameData.bulletPower += 2;\r\n                child.removeFromParent();\r\n            }else if(child.name == 'fast'){\r\n                GameData.bulletSpeed += 2;\r\n                child.removeFromParent();\r\n            }else if(child.name == 'double' || child.name == 'rocket'){\r\n                child.removeFromParent();\r\n            }\r\n        }\r\n        GameData.exploreALL = false;\r\n        console.log('end exploreALL');\r\n        // this.resumeAllChilds();\r\n    },\r\n    setRockect(){\r\n        let self = this;\r\n        GameData.rocketStatus = 1;\r\n        GameData.blockDropSpeed = 0.7;\r\n\r\n        let childs = this.gameBox.children;\r\n        for(let x in childs){\r\n            let child = childs[x];\r\n            if(child.group == 'prop'){\r\n                child.stopAllActions();\r\n                child.runAction(cc.moveTo(0.01, this.player.x, this.player.y + 30));\r\n            }else if(child.name == 'blockList' || child.name == 'specList'){\r\n                child.stopAllActions();\r\n                child.runAction(\r\n                    cc.sequence( \r\n                        cc.moveTo(5, child.x, -140*150 - this.node.parent.height), \r\n                        cc.callFunc(function(){\r\n                            self.removeBlockList(child);\r\n                        }, this)\r\n                    )\r\n                );\r\n            }\r\n        }\r\n\r\n        this.player.runAction(cc.sequence( cc.moveBy(0.5, 0, this.node.height/2), cc.delayTime(2), cc.callFunc(function(){\r\n            GameData.rocketStatus = 2;\r\n        }, this) ));\r\n    },\r\n    stopRocketing(){\r\n        GameData.blockDropSpeed = 4;\r\n        this.exploreAllBlocks();\r\n        \r\n        this.player.runAction(cc.moveBy(0.2, 0, -this.node.height/2));\r\n        GameData.rocketStatus = 0;\r\n        GameData.collideStatus = [0,0];\r\n    },\r\n    invite(){\r\n        let self = this;\r\n        this.continueNode.getComponent('cover').stopCount();\r\n        this.pauseAllChilds();\r\n        if (window.wx != undefined) {\r\n            window.wx.shareAppMessage({\r\n                title: 'hitBricks', \r\n                imageUrl: 'res/raw-assets/resources/hitBricks.jpg', \r\n                query: \"from=group\",\r\n                success:(res)=>{\r\n                    self.continueGame();\r\n                },\r\n                fail:()=>{\r\n                    self.continueNode.getComponent('cover').startCount();\r\n                    self.resumeAllChilds();\r\n                }\r\n            });\r\n        }\r\n    },\r\n    continueGame(){\r\n        this._isInvite = true;\r\n        this.continueNode.active = false;\r\n        this.scheduleOnce(function(){\r\n            this.player.getComponent('player').init();\r\n            this.exploreAllBlocks();\r\n            this.resumeAllChilds();\r\n        }, 0.8);\r\n        \r\n        \r\n    },\r\n    convertNum(num){\r\n        if(num < 0) return 0;\r\n        if(num >= 1000){\r\n            return Math.round(num/10)/100 + 'K';\r\n        }\r\n        return num;\r\n    },\r\n    revertNum(strNum){\r\n        strNum = String(strNum);\r\n        if(strNum.search('K') > 0){\r\n            return Number(strNum.substr(0, strNum.length -1))*1000;\r\n        }\r\n        return Number(strNum);\r\n    },\r\n    submitScore(){\r\n        // cc.log('submitScore:  '+score);\r\n        if (window.wx != undefined) {\r\n            window.wx.postMessage({\r\n                messageType: \"sendScore\",\r\n                score: GameData.score\r\n            });\r\n        } else {\r\n            cc.log(\"fail: x_total : \" + this.score)\r\n        }\r\n    }\r\n});\r\n"]}